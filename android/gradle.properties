# android/gradle.properties

# ==========================================
# GRADLE JVM OPTIMIZATION FOR GEMMA 3N E2B
# Essential for handling 3GB+ model files
# ==========================================
# Increase heap memory to 16GB as recommended for 3GB+ models
org.gradle.jvmargs=-Xmx16G -XX:MaxMetaspaceSize=4G -XX:ReservedCodeCacheSize=512m -XX:+HeapDumpOnOutOfMemoryError -XX:+UseG1GC -XX:G1HeapRegionSize=32m
# Enable parallel builds for faster compilation
org.gradle.parallel=true
# Enable build caching
org.gradle.caching=true
# Use daemon for faster builds
org.gradle.daemon=true

# ==========================================
# ANDROID CONFIGURATION
# ==========================================
# AndroidX migration (required for MediaPipe)
android.useAndroidX=true
android.enableJetifier=true
# Enable R8 full mode for better optimization
android.enableR8.fullMode=true
# Use full classpath for dexing transforms (for large projects)
android.useFullClasspathForDexingTransform=true

# ==========================================
# MEDIAPIPE SPECIFIC OPTIMIZATIONS
# ==========================================
# Optimize asset packaging for large models
android.enableAapt2=true

# ==========================================
# LARGE ASSET HANDLING
# Critical for 3GB+ Gemma model deployment
# ==========================================
# Optimize memory usage during build
org.gradle.workers.max=4

# ==========================================
# PERFORMANCE TUNING
# ==========================================
# Enable incremental annotation processing
kapt.incremental.apt=true
# Use incremental Java compilation
org.gradle.java.compile-classpath-packaging=true
# Enable file system watching for better incremental builds
org.gradle.vfs.watch=true

# ==========================================
# BUILD OPTIMIZATION FLAGS
# ==========================================
# Enable parallel project execution
org.gradle.parallel=true
# Enable build cache
org.gradle.caching=true

# ==========================================
# FLUTTER SPECIFIC SETTINGS
# ==========================================
# Flutter compile time optimizations
flutter.compilationTraceEnabled=true
flutter.trackWidgetCreation=false

# ==========================================
# MEMORY AND PERFORMANCE TUNING
# ==========================================
# File system watching (helps with large file changes)
org.gradle.vfs.watch=true
# Worker process settings
org.gradle.workers.max=4

# ==========================================
# PROGUARD/R8 SETTINGS
# ==========================================
# Keep MediaPipe classes (configured in proguard-rules.pro)
android.enableProguardInReleaseBuilds=true

# ==========================================
# MULTIDEX CONFIGURATION
# Required for large dependency count
# ==========================================
android.enableDexingArtifactTransform=true

# ==========================================
# FLUTTER ENGINE SETTINGS
# ==========================================
# Flutter engine optimization
flutter.enableMirrors=false

# ==========================================
# BUILD ENVIRONMENT
# ==========================================
# Suppress Gradle warnings
android.suppressUnsupportedCompileSdk=35

# Enable new resource processing
android.enableNewResourceProcessing=true

# ==========================================
# EXPERIMENTAL FEATURES
# For better large file handling
# ==========================================
# Gradle configuration cache (experimental)
org.gradle.unsafe.configuration-cache=false
# Parallel project execution
org.gradle.parallel.threads=4

# ==========================================
# DEBUGGING AND LOGGING
# ==========================================
# Enable detailed build logging for debugging
org.gradle.logging.level=info

# ==========================================
# FLUTTER WEB SETTINGS (disabled for mobile-only app)
# ==========================================
flutter.web.auto-detect=false

# ==========================================
# ANDROID GRADLE PLUGIN SETTINGS
# ==========================================
# Use latest Android Gradle Plugin features
android.defaults.buildfeatures.buildconfig=true
android.defaults.buildfeatures.aidl=false
android.defaults.buildfeatures.renderscript=false
android.defaults.buildfeatures.resvalues=false
android.defaults.buildfeatures.shaders=false

# ==========================================
# NOTES FOR DEPLOYMENT
# ==========================================
# These settings are optimized for:
# 1. Building apps with 3GB+ AI models
# 2. MediaPipe LLM Inference integration
# 3. Fast compilation times
# 4. Memory-efficient builds
# 5. Large asset handling
#
# If build fails with OutOfMemoryError:
# 1. Increase org.gradle.jvmargs Xmx value
# 2. Close other applications during build
# 3. Use gradle clean before building
# 4. Consider using gradle --no-daemon for one-time builds
#
# For production builds:
# 1. Use release build type
# 2. Enable ProGuard/R8 optimization
# 3. Test on target devices with 4GB+ RAM
# 4. Monitor memory usage during runtime